name: backup database
on:
    push: 
      branches:
        - separateBranch
    workflow_dispatch:
jobs:
    backup:
        runs-on: brycelabel
        steps:
            - name: backup
              run: |
                CONTAINER_NAME=$(kubectl -n bryce2 get pods --no-headers -o custom-columns=":metadata.name" | grep "blazor-web-db-deployment")
                kubectl -n bryce2 exec -t $CONTAINER_NAME -- \
                    pg_dumpall -c -U postgres \
                    > /home/bryce/dump.sql
                    